{"ast":null,"code":"import _regeneratorRuntime from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{useSignOut}from\"react-auth-kit\";import useAuthHeaders from\"./useAuthHeaders\";var useFetcher=function useFetcher(url,config){var signOut=useSignOut();var headers=useAuthHeaders();return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(url,_objectSpread({headers:headers},config));case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);if((_context.t0===null||_context.t0===void 0?void 0:(_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===401)signOut();case 10:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));};export default useFetcher;","map":{"version":3,"names":["axios","useSignOut","useAuthHeaders","useFetcher","url","config","signOut","headers","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_err$response","wrap","_callee$","_context","prev","next","get","_objectSpread","abrupt","sent","t0","console","error","response","status","stop"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/hooks/useFetcher.ts"],"sourcesContent":["import axios, { RawAxiosRequestConfig } from \"axios\"\nimport { useSignOut } from \"react-auth-kit\";\nimport useAuthHeaders from \"./useAuthHeaders\";\n\nconst useFetcher = (url: string, config?: RawAxiosRequestConfig) => {\n  const signOut = useSignOut();\n  const headers = useAuthHeaders();\n\n  return async () => {\n    try {\n      return await axios.get(url, { headers, ...config })\n    } catch (err) {\n      console.error(err);\n      if (err?.response?.status === 401) signOut();\n    }\n  }\n}\n\nexport default useFetcher;"],"mappings":"4bAAA,MAAO,CAAAA,KAAK,KAAiC,OAAO,CACpD,OAASC,UAAU,KAAQ,gBAAgB,CAC3C,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAE7C,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,GAAW,CAAEC,MAA8B,CAAK,CAClE,GAAM,CAAAC,OAAO,CAAGL,UAAU,CAAC,CAAC,CAC5B,GAAM,CAAAM,OAAO,CAAGL,cAAc,CAAC,CAAC,CAEhC,mBAAAM,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAO,SAAAC,QAAA,MAAAC,aAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEU,CAAAjB,KAAK,CAACkB,GAAG,CAACd,GAAG,CAAAe,aAAA,EAAIZ,OAAO,CAAPA,OAAO,EAAKF,MAAM,CAAE,CAAC,eAAAU,QAAA,CAAAK,MAAA,UAAAL,QAAA,CAAAM,IAAA,SAAAN,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAEnDQ,OAAO,CAACC,KAAK,CAAAT,QAAA,CAAAO,EAAI,CAAC,CAClB,GAAI,CAAAP,QAAA,CAAAO,EAAA,SAAAP,QAAA,CAAAO,EAAA,kBAAAV,aAAA,CAAAG,QAAA,CAAAO,EAAA,CAAKG,QAAQ,UAAAb,aAAA,iBAAbA,aAAA,CAAec,MAAM,IAAK,GAAG,CAAEpB,OAAO,CAAC,CAAC,CAAC,yBAAAS,QAAA,CAAAY,IAAA,MAAAhB,OAAA,gBAEhD,GACH,CAAC,CAED,cAAe,CAAAR,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}