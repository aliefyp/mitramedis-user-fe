{"ast":null,"code":"import _objectSpread from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import useUserDetail from \"api/user/useUserDetail\";\n// import { useAuthUser } from \"react-auth-kit\";\nimport{useLocation,useNavigate}from\"react-router-dom\";import ModalConfirmation from\"components/organism/ModalConfirmation\";import{createContext,useContext,useEffect,useState,useCallback}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MOBILE_BREAKPOINT=640;export var AppContext=/*#__PURE__*/createContext({});export var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useState=useState({open:false,type:\"success\",title:\"\",message:\"\"}),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(window.innerWidth<=MOBILE_BREAKPOINT),_useState4=_slicedToArray(_useState3,2),isMobile=_useState4[0],setIsMobile=_useState4[1];var location=useLocation();var navigate=useNavigate();// const auth = useAuthUser();\n// const {\n//   data: userDetail,\n//   isLoading,\n//   isError,\n// } = useUserDetail({ userId: auth()?.userId });\n// console.log(userDetail);\n// console.log(isLoading);\n// console.log(isError);\nvar handleResize=function handleResize(){setIsMobile(window.innerWidth<=MOBILE_BREAKPOINT);};var handleCloseModal=useCallback(function(){setModal(_objectSpread(_objectSpread({},modal),{},{open:false}));},[modal]);useEffect(function(){var state=location.state;if(state!==null&&state!==void 0&&state.modal){var _state$modal;switch((_state$modal=state.modal)===null||_state$modal===void 0?void 0:_state$modal.key){case\"new-patient\":setModal({open:true,type:\"success\",title:\"Berhasil\",message:\"Data pasien baru atas nama <b>\".concat(state.modal.data.patient_name,\"</b> berhasil disimpan. Tekan tombol di bawah untuk membuat pemeriksaan atas nama pasien ini.\"),primaryAction:\"Rekam Medis Baru\",onPrimaryActionClick:function onPrimaryActionClick(){return navigate(\"/rekam-medis/\".concat(state.modal.data.patient_id));}});break;case\"edit-patient\":setModal({open:true,type:\"success\",title:\"Berhasil\",message:\"Data pasien atas nama <b>\".concat(state.modal.data.patient_name,\"</b> berhasil disimpan.\"),primaryAction:\"Tutup\",onPrimaryActionClick:function onPrimaryActionClick(){return navigate(\"/pasien\");}});break;default:break;}}window.history.replaceState({},document.title);},[handleCloseModal,location,location.state,modal,navigate]);useEffect(function(){window.addEventListener(\"resize\",handleResize);return function(){return window.removeEventListener(\"resize\",handleResize);};});return/*#__PURE__*/_jsxs(AppContext.Provider,{value:{isMobile:isMobile},children:[children,/*#__PURE__*/_jsx(ModalConfirmation,_objectSpread(_objectSpread({},modal),{},{onClose:handleCloseModal}))]});};var useAppContext=function useAppContext(){return useContext(AppContext);};export default useAppContext;","map":{"version":3,"names":["useLocation","useNavigate","ModalConfirmation","createContext","useContext","useEffect","useState","useCallback","jsx","_jsx","jsxs","_jsxs","MOBILE_BREAKPOINT","AppContext","AppProvider","_ref","children","_useState","open","type","title","message","_useState2","_slicedToArray","modal","setModal","_useState3","window","innerWidth","_useState4","isMobile","setIsMobile","location","navigate","handleResize","handleCloseModal","_objectSpread","state","_state$modal","key","concat","data","patient_name","primaryAction","onPrimaryActionClick","patient_id","history","replaceState","document","addEventListener","removeEventListener","Provider","value","onClose","useAppContext"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/context/AppContext.tsx"],"sourcesContent":["// import useUserDetail from \"api/user/useUserDetail\";\n// import { useAuthUser } from \"react-auth-kit\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport ModalConfirmation, {\n  ModalConfirmationProps,\n} from \"components/organism/ModalConfirmation\";\nimport {\n  createContext,\n  ReactNode,\n  useContext,\n  useEffect,\n  useState,\n  useCallback,\n} from \"react\";\n\nconst MOBILE_BREAKPOINT = 640;\n\ninterface AppContextInterface {\n  isMobile: boolean;\n  // userDetail: UserType | null;\n}\n\nexport const AppContext = createContext({} as AppContextInterface);\n\nexport const AppProvider = ({ children }: { children: ReactNode }) => {\n  const [modal, setModal] = useState<Omit<ModalConfirmationProps, \"onClose\">>({\n    open: false,\n    type: \"success\",\n    title: \"\",\n    message: \"\",\n  });\n  const [isMobile, setIsMobile] = useState(\n    window.innerWidth <= MOBILE_BREAKPOINT\n  );\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // const auth = useAuthUser();\n  // const {\n  //   data: userDetail,\n  //   isLoading,\n  //   isError,\n  // } = useUserDetail({ userId: auth()?.userId });\n\n  // console.log(userDetail);\n  // console.log(isLoading);\n  // console.log(isError);\n\n  const handleResize = () => {\n    setIsMobile(window.innerWidth <= MOBILE_BREAKPOINT);\n  };\n\n  const handleCloseModal = useCallback(() => {\n    setModal({ ...modal, open: false });\n  }, [modal]);\n\n  useEffect(() => {\n    const { state } = location;\n\n    if (state?.modal) {\n      switch (state.modal?.key) {\n        case \"new-patient\":\n          setModal({\n            open: true,\n            type: \"success\",\n            title: \"Berhasil\",\n            message: `Data pasien baru atas nama <b>${state.modal.data.patient_name}</b> berhasil disimpan. Tekan tombol di bawah untuk membuat pemeriksaan atas nama pasien ini.`,\n            primaryAction: \"Rekam Medis Baru\",\n            onPrimaryActionClick: () =>\n              navigate(`/rekam-medis/${state.modal.data.patient_id}`),\n          });\n          break;\n\n        case \"edit-patient\":\n          setModal({\n            open: true,\n            type: \"success\",\n            title: \"Berhasil\",\n            message: `Data pasien atas nama <b>${state.modal.data.patient_name}</b> berhasil disimpan.`,\n            primaryAction: \"Tutup\",\n            onPrimaryActionClick: () => navigate(`/pasien`),\n          });\n          break;\n        default:\n          break;\n      }\n    }\n\n    window.history.replaceState({}, document.title);\n  }, [handleCloseModal, location, location.state, modal, navigate]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  });\n\n  return (\n    <AppContext.Provider\n      value={{\n        isMobile,\n      }}\n    >\n      {children}\n      <ModalConfirmation {...modal} onClose={handleCloseModal} />\n    </AppContext.Provider>\n  );\n};\n\nconst useAppContext = () => {\n  return useContext(AppContext);\n};\n\nexport default useAppContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}