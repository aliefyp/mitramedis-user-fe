{"ast":null,"code":"import _slicedToArray from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{useSignOut}from\"react-auth-kit\";import{useMutation,useQuery}from\"react-query\";import useAuthHeaders from\"hooks/useAuthHeaders\";import{useState}from\"react\";export var useAddStock=function useAddStock(){var signOut=useSignOut();var headers=useAuthHeaders();return useMutation(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload){var _err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_ENDPOINT,\"/stock\"),JSON.stringify(payload),{headers:headers});case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);if((_context.t0===null||_context.t0===void 0?void 0:(_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===401)signOut();case 10:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}());};export var useStockCard=function useStockCard(_ref2){var filter=_ref2.filter,stock_id=_ref2.stock_id;var signOut=useSignOut();var headers=useAuthHeaders();// const [page, setPage] = useState(1);\n// const [perPage, setPerPage] = useState(10);\nreturn _objectSpread({},useQuery({queryKey:['get-all-stock',filter,stock_id],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var query,_err$response2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:query=new URLSearchParams(_objectSpread({},filter));_context2.prev=1;_context2.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_ENDPOINT,\"/stock-card/\").concat(stock_id,\"?\").concat(query),{headers:headers});case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);if((_context2.t0===null||_context2.t0===void 0?void 0:(_err$response2=_context2.t0.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401)signOut();case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,7]]);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}(),enabled:Boolean(stock_id)}));};export var useAllStock=function useAllStock(payload){var signOut=useSignOut();var headers=useAuthHeaders();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),perPage=_useState4[0],setPerPage=_useState4[1];return _objectSpread({page:page,perPage:perPage,setPage:setPage,setPerPage:setPerPage},useQuery({queryKey:['get-all-stock',payload===null||payload===void 0?void 0:payload.filter],queryFn:function(){var _queryFn2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var query,_err$response3;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:query=new URLSearchParams(_objectSpread({page:String(page),per_page:String(perPage)},payload===null||payload===void 0?void 0:payload.filter));_context3.prev=1;_context3.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_ENDPOINT,\"/stock?\").concat(query),{headers:headers});case 4:return _context3.abrupt(\"return\",_context3.sent);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](1);console.error(_context3.t0);if((_context3.t0===null||_context3.t0===void 0?void 0:(_err$response3=_context3.t0.response)===null||_err$response3===void 0?void 0:_err$response3.status)===401)signOut();case 11:case\"end\":return _context3.stop();}},_callee3,null,[[1,7]]);}));function queryFn(){return _queryFn2.apply(this,arguments);}return queryFn;}()}));};","map":{"version":3,"names":["axios","useSignOut","useMutation","useQuery","useAuthHeaders","useState","useAddStock","signOut","headers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payload","_err$response","wrap","_callee$","_context","prev","next","post","concat","process","env","REACT_APP_API_ENDPOINT","JSON","stringify","abrupt","sent","t0","console","error","response","status","stop","_x","apply","arguments","useStockCard","_ref2","filter","stock_id","_objectSpread","queryKey","queryFn","_queryFn","_callee2","query","_err$response2","_callee2$","_context2","URLSearchParams","get","enabled","Boolean","useAllStock","_useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","perPage","setPerPage","_queryFn2","_callee3","_err$response3","_callee3$","_context3","String","per_page"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/api/stock.ts"],"sourcesContent":["import axios, { AxiosResponse } from \"axios\"\nimport { useSignOut } from \"react-auth-kit\";\nimport { useMutation, useQuery } from \"react-query\"\nimport useAuthHeaders from \"hooks/useAuthHeaders\";\nimport { useState } from \"react\";\nimport { StockCardType, StockType } from \"types/stock\";\n\n\nexport const useAddStock = () => {\n  const signOut = useSignOut();\n  const headers = useAuthHeaders();\n\n  return useMutation(async (payload: StockType) => {\n    try {\n      return await axios.post(`${process.env.REACT_APP_API_ENDPOINT}/stock`, JSON.stringify(payload), { headers });\n    } catch (err) {\n      console.error(err);\n      if (err?.response?.status === 401) signOut();\n    }\n  })\n}\n\n\ntype UseStockCardProps = {\n  stock_id: string;\n  filter?:  Record<string, string>\n}\n\ninterface GetStockCardResponse extends AxiosResponse {\n  data: {\n    data: {\n      stock_card: StockCardType[];\n    }\n  }\n}\nexport const useStockCard = ({ filter, stock_id }: UseStockCardProps) => {\n  const signOut = useSignOut();\n  const headers = useAuthHeaders();\n\n  // const [page, setPage] = useState(1);\n  // const [perPage, setPerPage] = useState(10);\n\n  return {\n    // page,\n    // perPage,\n    // setPage,\n    // setPerPage,\n    ...useQuery<unknown, unknown, GetStockCardResponse>({\n      queryKey: ['get-all-stock', filter, stock_id],\n      queryFn: async () => {\n        const query = new URLSearchParams({\n          // page: String(page),\n          // per_page: String(perPage),\n          ...filter,\n        });\n\n        try {\n          return await axios.get(`${process.env.REACT_APP_API_ENDPOINT}/stock-card/${stock_id}?${query}`, { headers })\n        } catch (err) {\n          console.error(err);\n          if (err?.response?.status === 401) signOut();\n        }\n      },\n      enabled: Boolean(stock_id),\n    }),\n  }\n}\n\n\ntype UseAllStockProps = {\n  filter?:  Record<string, string>\n}\n\ninterface GetAllStockResponse extends AxiosResponse {\n  data: {\n    data: {\n      stock: StockType[];\n      pagination: {\n        current_page: number;\n        total_page: number;\n      }\n    }\n  }\n}\n\nexport const useAllStock = (payload?: UseAllStockProps) => {\n  const signOut = useSignOut();\n  const headers = useAuthHeaders();\n\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(10);\n\n  return {\n    page,\n    perPage,\n    setPage,\n    setPerPage,\n    ...useQuery<unknown, unknown, GetAllStockResponse>({\n      queryKey: ['get-all-stock', payload?.filter],\n      queryFn: async () => {\n        const query = new URLSearchParams({\n          page: String(page),\n          per_page: String(perPage),\n          ...payload?.filter,\n        });\n\n        try {\n          return await axios.get(`${process.env.REACT_APP_API_ENDPOINT}/stock?${query}`, { headers })\n        } catch (err) {\n          console.error(err);\n          if (err?.response?.status === 401) signOut();\n        }\n      },\n    }),\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}