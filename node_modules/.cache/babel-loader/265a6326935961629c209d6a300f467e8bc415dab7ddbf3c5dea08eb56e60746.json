{"ast":null,"code":"import _objectSpread from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"className\",\"error\",\"helper\",\"name\",\"label\",\"options\",\"required\",\"loading\",\"truncateOption\",\"onValueChange\",\"onSearch\",\"onChange\",\"onLoadMore\",\"onFocus\"];import React,{Fragment,useRef,useState}from\"react\";import{Combobox as ComboboxHeadless,Transition}from\"@headlessui/react\";import clsx from\"clsx\";import{HiCheck,HiChevronDown}from\"react-icons/hi\";import{Waypoint}from\"react-waypoint\";import Typography from\"components/Typography\";import Label from\"./Label\";import{Spinner}from\"flowbite-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ComboBox=function ComboBox(_ref){var className=_ref.className,error=_ref.error,helper=_ref.helper,name=_ref.name,label=_ref.label,options=_ref.options,required=_ref.required,loading=_ref.loading,truncateOption=_ref.truncateOption,onValueChange=_ref.onValueChange,onSearch=_ref.onSearch,_onChange=_ref.onChange,onLoadMore=_ref.onLoadMore,onFocus=_ref.onFocus,rest=_objectWithoutProperties(_ref,_excluded);var comboBtn=useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var handleInputFocus=function handleInputFocus(event){if(onFocus)onFocus(event);if(comboBtn.current){var _comboBtn$current;(_comboBtn$current=comboBtn.current)===null||_comboBtn$current===void 0?void 0:_comboBtn$current.click();}};var handleChange=function handleChange(val){setSelected(val);if(onValueChange)onValueChange(val);};return/*#__PURE__*/_jsx(ComboboxHeadless,{value:selected,onChange:handleChange,children:/*#__PURE__*/_jsxs(\"div\",{className:className,children:[label&&/*#__PURE__*/_jsx(Label,{required:required,htmlFor:name,children:label}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full cursor-default text-left sm:text-sm\",children:[/*#__PURE__*/_jsx(ComboboxHeadless.Input,_objectSpread({autoComplete:\"off\",className:clsx(\"placeholder:text-gray-400\",\"mt-1 flex w-full rounded-md border border-gray-300 shadow-sm\",error&&\"border-red-300\",error?\"focus:border-red-300 focus:ring focus:ring-red-200 focus:ring-opacity-50\":\"focus:border-sky-400 focus:ring focus:ring-sky-300 focus:ring-opacity-50\"),displayValue:function displayValue(val){return val.label;},onClick:handleInputFocus,onChange:function onChange(event){_onChange(event);if(onSearch)onSearch(event.target.value);}},rest)),/*#__PURE__*/_jsx(ComboboxHeadless.Button,{ref:comboBtn,className:\"absolute inset-y-0 right-0 flex items-center pr-3\",children:/*#__PURE__*/_jsx(HiChevronDown,{className:\"text-2xl text-gray-500\",\"aria-hidden\":\"true\"})})]}),helper&&/*#__PURE__*/_jsx(Typography,{className:clsx(\"mt-1\",error?\"text-red-500\":\"text-gray-600\"),smaller:true,children:helper}),/*#__PURE__*/_jsx(Transition,{as:Fragment,leave:\"transition ease-in duration-100\",leaveFrom:\"opacity-100\",leaveTo:\"opacity-0\",afterLeave:onSearch?function(){return onSearch(\"\");}:null,children:/*#__PURE__*/_jsxs(ComboboxHeadless.Options,{className:\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white p-2 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(Spinner,{})}),!loading&&options.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"relative cursor-default select-none px-4 py-2 text-gray-700\",children:\"Nothing found.\"}):options.map(function(val,index){return/*#__PURE__*/_jsx(ComboboxHeadless.Option,{className:function className(_ref2){var active=_ref2.active;return\"relative cursor-pointer select-none rounded-md p-2 pl-10 \".concat(active?\"bg-sky-600 text-white\":\"text-gray-900\");},value:val,children:function children(_ref3){var selected=_ref3.selected,active=_ref3.active;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"block \".concat(selected?\"font-bold\":\"font-normal\",\", \").concat(active&&\"font-bold\",\" \").concat(truncateOption&&\"truncate\"),children:val.label}),selected?/*#__PURE__*/_jsx(\"span\",{className:\"absolute inset-y-0 left-0 flex items-center pl-3 \".concat(active?\"text-white\":\"text-sky-600\"),children:/*#__PURE__*/_jsx(HiCheck,{\"aria-hidden\":\"true\",className:\"text-lg\"})}):null,index===options.length-1&&/*#__PURE__*/_jsx(Waypoint,{onEnter:onLoadMore})]});}},val.key);})]})})]})]})});};export default ComboBox;","map":{"version":3,"names":["React","Fragment","useRef","useState","Combobox","ComboboxHeadless","Transition","clsx","HiCheck","HiChevronDown","Waypoint","Typography","Label","Spinner","jsx","_jsx","jsxs","_jsxs","_Fragment","ComboBox","_ref","className","error","helper","name","label","options","required","loading","truncateOption","onValueChange","onSearch","onChange","onLoadMore","onFocus","rest","_objectWithoutProperties","_excluded","comboBtn","_useState","_useState2","_slicedToArray","selected","setSelected","handleInputFocus","event","current","_comboBtn$current","click","handleChange","val","value","children","htmlFor","Input","_objectSpread","autoComplete","displayValue","onClick","target","Button","ref","smaller","as","leave","leaveFrom","leaveTo","afterLeave","Options","length","map","index","Option","_ref2","active","concat","_ref3","onEnter","key"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/components/FormInput/ComboBox.tsx"],"sourcesContent":["import React, { Fragment, useRef, useState } from \"react\";\nimport { Combobox as ComboboxHeadless, Transition } from \"@headlessui/react\";\nimport clsx from \"clsx\";\nimport { HiCheck, HiChevronDown } from \"react-icons/hi\";\nimport { Waypoint } from \"react-waypoint\";\nimport Typography from \"components/Typography\";\nimport Label from \"./Label\";\nimport { Spinner } from \"flowbite-react\";\n\ninterface Option extends Record<string, number | string> {\n  key: number | string;\n  label: string;\n}\n\ninterface ComboboxProps extends React.HTMLProps<HTMLInputElement> {\n  error?: boolean;\n  helper?: string;\n  label?: string;\n  options: Option[];\n  required?: boolean;\n  loading?: boolean;\n  truncateOption?: boolean;\n  onValueChange?: (val: Option) => void;\n  onSearch?: (text) => void;\n  onLoadMore?: () => void;\n}\n\nconst ComboBox = ({\n  className,\n  error,\n  helper,\n  name,\n  label,\n  options,\n  required,\n  loading,\n  truncateOption,\n  onValueChange,\n  onSearch,\n  onChange,\n  onLoadMore,\n  onFocus,\n  ...rest\n}: ComboboxProps) => {\n  const comboBtn = useRef(null);\n  const [selected, setSelected] = useState({});\n\n  const handleInputFocus = (event) => {\n    if (onFocus) onFocus(event);\n    if (comboBtn.current) {\n      comboBtn.current?.click();\n    }\n  };\n\n  const handleChange = (val: Option) => {\n    setSelected(val);\n    if (onValueChange) onValueChange(val);\n  };\n\n  return (\n    <ComboboxHeadless value={selected} onChange={handleChange}>\n      <div className={className}>\n        {label && (\n          <Label required={required} htmlFor={name}>\n            {label}\n          </Label>\n        )}\n        <div className=\"relative\">\n          <div className=\"relative w-full cursor-default text-left sm:text-sm\">\n            {/* \n                // @ts-ignore */}\n            <ComboboxHeadless.Input\n              autoComplete=\"off\"\n              className={clsx(\n                \"placeholder:text-gray-400\",\n                \"mt-1 flex w-full rounded-md border border-gray-300 shadow-sm\",\n                error && \"border-red-300\",\n                error\n                  ? \"focus:border-red-300 focus:ring focus:ring-red-200 focus:ring-opacity-50\"\n                  : \"focus:border-sky-400 focus:ring focus:ring-sky-300 focus:ring-opacity-50\"\n              )}\n              displayValue={(val: unknown) => (val as Option).label}\n              onClick={handleInputFocus}\n              onChange={(event) => {\n                onChange(event);\n                if (onSearch) onSearch(event.target.value);\n              }}\n              {...rest}\n            />\n            <ComboboxHeadless.Button\n              ref={comboBtn}\n              className=\"absolute inset-y-0 right-0 flex items-center pr-3\"\n            >\n              <HiChevronDown\n                className=\"text-2xl text-gray-500\"\n                aria-hidden=\"true\"\n              />\n            </ComboboxHeadless.Button>\n          </div>\n          {helper && (\n            <Typography\n              className={clsx(\"mt-1\", error ? \"text-red-500\" : \"text-gray-600\")}\n              smaller\n            >\n              {helper}\n            </Typography>\n          )}\n          <Transition\n            as={Fragment}\n            leave=\"transition ease-in duration-100\"\n            leaveFrom=\"opacity-100\"\n            leaveTo=\"opacity-0\"\n            afterLeave={onSearch ? () => onSearch(\"\") : null}\n          >\n            <ComboboxHeadless.Options className=\"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white p-2 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\">\n              {loading && (\n                <div className=\"flex justify-center\">\n                  <Spinner />\n                </div>\n              )}\n              {!loading && options.length === 0 ? (\n                <div className=\"relative cursor-default select-none px-4 py-2 text-gray-700\">\n                  Nothing found.\n                </div>\n              ) : (\n                options.map((val, index) => (\n                  <ComboboxHeadless.Option\n                    key={val.key}\n                    className={({ active }) =>\n                      `relative cursor-pointer select-none rounded-md p-2 pl-10 ${\n                        active ? \"bg-sky-600 text-white\" : \"text-gray-900\"\n                      }`\n                    }\n                    value={val}\n                  >\n                    {({ selected, active }) => (\n                      <>\n                        <span\n                          className={`block ${\n                            selected ? \"font-bold\" : \"font-normal\"\n                          }, ${active && \"font-bold\"} ${\n                            truncateOption && \"truncate\"\n                          }`}\n                        >\n                          {val.label}\n                        </span>\n                        {selected ? (\n                          <span\n                            className={`absolute inset-y-0 left-0 flex items-center pl-3 ${\n                              active ? \"text-white\" : \"text-sky-600\"\n                            }`}\n                          >\n                            <HiCheck aria-hidden=\"true\" className=\"text-lg\" />\n                          </span>\n                        ) : null}\n                        {index === options.length - 1 && (\n                          <Waypoint onEnter={onLoadMore} />\n                        )}\n                      </>\n                    )}\n                  </ComboboxHeadless.Option>\n                ))\n              )}\n            </ComboboxHeadless.Options>\n          </Transition>\n        </div>\n      </div>\n    </ComboboxHeadless>\n  );\n};\n\nexport default ComboBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}