{"ast":null,"code":"import _regeneratorRuntime from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{useSignOut}from\"react-auth-kit\";import{useMutation}from\"react-query\";import useAuthHeaders from\"hooks/useAuthHeaders\";export var usePurchase=function usePurchase(){var signOut=useSignOut();var headers=useAuthHeaders();return useMutation(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(payload){var _err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_ENDPOINT,\"/purchase\"),JSON.stringify(payload),{headers:headers});case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0);if((_context.t0===null||_context.t0===void 0?void 0:(_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===401)signOut();case 10:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}());};","map":{"version":3,"names":["axios","useSignOut","useMutation","useAuthHeaders","usePurchase","signOut","headers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payload","_err$response","wrap","_callee$","_context","prev","next","post","concat","process","env","REACT_APP_API_ENDPOINT","JSON","stringify","abrupt","sent","t0","console","error","response","status","stop","_x","apply","arguments"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/api/purchase.ts"],"sourcesContent":["import axios from \"axios\"\nimport { useSignOut } from \"react-auth-kit\";\nimport { useMutation } from \"react-query\"\nimport useAuthHeaders from \"hooks/useAuthHeaders\";\nimport { PurchaseType } from \"types/purchase\";\n\nexport const usePurchase = () => {\n  const signOut = useSignOut();\n  const headers = useAuthHeaders();\n\n  return useMutation(async (payload: PurchaseType) => {\n    try {\n      return await axios.post(`${process.env.REACT_APP_API_ENDPOINT}/purchase`, JSON.stringify(payload), { headers });\n    } catch (err) {\n      console.error(err);\n      if (err?.response?.status === 401) signOut();\n    }\n  })\n}"],"mappings":"8SAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,gBAAgB,CAC3C,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,cAAc,KAAM,sBAAsB,CAGjD,MAAO,IAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CAC/B,GAAM,CAAAC,OAAO,CAAGJ,UAAU,CAAC,CAAC,CAC5B,GAAM,CAAAK,OAAO,CAAGH,cAAc,CAAC,CAAC,CAEhC,MAAO,CAAAD,WAAW,6BAAAK,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAOC,OAAqB,MAAAC,aAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE9B,CAAAlB,KAAK,CAACmB,IAAI,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,cAAaC,IAAI,CAACC,SAAS,CAACb,OAAO,CAAC,CAAE,CAAEN,OAAO,CAAPA,OAAQ,CAAC,CAAC,eAAAU,QAAA,CAAAU,MAAA,UAAAV,QAAA,CAAAW,IAAA,SAAAX,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,aAE/Ga,OAAO,CAACC,KAAK,CAAAd,QAAA,CAAAY,EAAI,CAAC,CAClB,GAAI,CAAAZ,QAAA,CAAAY,EAAA,SAAAZ,QAAA,CAAAY,EAAA,kBAAAf,aAAA,CAAAG,QAAA,CAAAY,EAAA,CAAKG,QAAQ,UAAAlB,aAAA,iBAAbA,aAAA,CAAemB,MAAM,IAAK,GAAG,CAAE3B,OAAO,CAAC,CAAC,CAAC,yBAAAW,QAAA,CAAAiB,IAAA,MAAAtB,OAAA,gBAEhD,mBAAAuB,EAAA,SAAA3B,IAAA,CAAA4B,KAAA,MAAAC,SAAA,QAAC,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}