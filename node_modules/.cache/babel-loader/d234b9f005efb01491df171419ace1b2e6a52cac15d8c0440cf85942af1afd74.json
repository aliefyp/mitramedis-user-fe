{"ast":null,"code":"import _objectSpread from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectWithoutProperties from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"confirm_password\"];import{Fragment,useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import{Transition}from\"@headlessui/react\";import Button from\"components/Button\";import Input from\"components/FormInput/Input\";import LayoutPlain from\"components/LayoutPlain\";import useRegister from\"api/auth/useRegister\";import useToaster from\"context/ToasterContext\";import Card from\"components/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch;var _useRegister=useRegister(),isRegistering=_useRegister.isRegistering,submitRegister=_useRegister.register;var _useToaster=useToaster(),openToaster=_useToaster.open;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(val){var confirm_password,rest,response,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;confirm_password=val.confirm_password,rest=_objectWithoutProperties(val,_excluded);_context.next=4;return submitRegister(rest);case 4:response=_context.sent;if(!response.success){_context.next=10;break;}openToaster({title:\"Pendaftaran Berhasil\",message:\"Silakan cek email Anda untuk melakukan verifikasi\",variant:\"success\",autoClose:true});setTimeout(function(){navigate(\"/login\");},3000);_context.next=11;break;case 10:throw new Error(response.message);case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);message=_context.t0 instanceof Error?_context.t0.message:\"Silahkan coba lagi\";openToaster({title:\"Pendaftaran Belum Berhasil\",message:message,variant:\"error\"});case 17:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setTimeout(function(){setShow(true);},500);},[]);return/*#__PURE__*/_jsx(LayoutPlain,{children:/*#__PURE__*/_jsx(Transition,{appear:true,show:show,as:Fragment,children:/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0 translate-y-5\",enterTo:\"opacity-100 translate-y-0\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{className:\"mx-auto flex min-w-[70vw] max-w-4xl flex-col overflow-hidden sm:min-w-0 sm:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden w-full bg-gradient-to-b from-brand3 to-brand1 px-8 pb-12 pt-8 sm:block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"align-center flex h-full flex-col justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex grow flex-col items-center justify-center px-6 py-8\",children:/*#__PURE__*/_jsx(\"img\",{className:\"m-0 mx-auto\",src:\"/img_login.svg\",alt:\"Login\"})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-5xl font-bold leading-10 tracking-tight text-slate-50\",children:[\"Partner\",/*#__PURE__*/_jsx(\"br\",{}),\"sehat\",/*#__PURE__*/_jsx(\"br\",{}),\"bersama\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full shrink-0 flex-col items-center justify-center space-y-4 p-4 py-8 sm:w-1/2 sm:p-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full space-y-4 md:space-y-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"leading text-3xl font-bold tracking-tight text-slate-800 dark:text-slate-50\",children:\"Daftar\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4 \",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nama Lengkap\",type:\"full_name\",id:\"full_name\",placeholder:\"Nama Langkap\"},register(\"full_name\"))),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nomor Telepon\",type:\"number\",id:\"phone_number\",placeholder:\"0812345xxxx\"},register(\"phone_number\"))),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Email\",type:\"email\",id:\"email\",placeholder:\"nama@domain.com\"},register(\"email\"))),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Password\",type:\"password\",id:\"password\",placeholder:\"Masukkan password\"},register(\"password\"))),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Ulangi Password\",type:\"password\",id:\"confirm_password\",placeholder:\"Ulangi password\"},register(\"confirm_password\",{validate:function validate(val){if(watch(\"password\")!==val){return\"Password Anda tidak cocok\";}}}))),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",loading:isRegistering,color:\"primary\",className:\"mt-8 w-full\",children:\"Daftar Sekarang\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-light text-gray-500 dark:text-gray-400\",children:[\"Sudah punya akun?\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"text-primary-600 dark:text-primary-500 font-medium hover:underline\",children:\"Masuk\"})]})]})]})})]})})})})});};export default Login;","map":{"version":3,"names":["Fragment","useEffect","useState","useForm","useNavigate","Transition","Button","Input","LayoutPlain","useRegister","useToaster","Card","jsx","_jsx","jsxs","_jsxs","Login","_useForm","register","handleSubmit","watch","_useRegister","isRegistering","submitRegister","_useToaster","openToaster","open","navigate","_useState","_useState2","_slicedToArray","show","setShow","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","val","confirm_password","rest","response","message","wrap","_callee$","_context","prev","next","_objectWithoutProperties","_excluded","sent","success","title","variant","autoClose","setTimeout","Error","t0","stop","_x","apply","arguments","children","appear","as","Child","enter","enterFrom","enterTo","className","src","alt","_objectSpread","label","type","id","placeholder","validate","loading","color","href"],"sources":["/Users/risky.setiyawan/Documents/Proj/mitramedis-frontend/src/pages/Register.tsx"],"sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Transition } from \"@headlessui/react\";\n\nimport Button from \"components/Button\";\nimport Input from \"components/FormInput/Input\";\nimport LayoutPlain from \"components/LayoutPlain\";\nimport useRegister from \"api/auth/useRegister\";\nimport useToaster from \"context/ToasterContext\";\nimport { RegisterParam } from \"types/register\";\nimport Card from \"components/Card\";\n\ninterface RegisterForm extends RegisterParam {\n  confirm_password: string;\n}\n\nconst Login = () => {\n  const { register, handleSubmit, watch } = useForm<RegisterForm>();\n  const { isRegistering, register: submitRegister } = useRegister();\n  const { open: openToaster } = useToaster();\n  const navigate = useNavigate();\n\n  const [show, setShow] = useState(false);\n\n  const onSubmit = async (val: RegisterForm) => {\n    try {\n      const { confirm_password, ...rest } = val;\n      const response = await submitRegister(rest);\n      if (response.success) {\n        openToaster({\n          title: \"Pendaftaran Berhasil\",\n          message: \"Silakan cek email Anda untuk melakukan verifikasi\",\n          variant: \"success\",\n          autoClose: true,\n        });\n\n        setTimeout(() => {\n          navigate(\"/login\");\n        }, 3000);\n      } else {\n        throw new Error(response.message);\n      }\n    } catch (err) {\n      const message = err instanceof Error ? err.message : \"Silahkan coba lagi\";\n\n      openToaster({\n        title: \"Pendaftaran Belum Berhasil\",\n        message,\n        variant: \"error\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      setShow(true);\n    }, 500);\n  }, []);\n\n  return (\n    <LayoutPlain>\n      <Transition appear show={show} as={Fragment}>\n        <Transition.Child\n          as={Fragment}\n          enter=\"ease-out duration-300\"\n          enterFrom=\"opacity-0 translate-y-5\"\n          enterTo=\"opacity-100 translate-y-0\"\n        >\n          <div>\n            <Card className=\"mx-auto flex min-w-[70vw] max-w-4xl flex-col overflow-hidden sm:min-w-0 sm:flex-row\">\n              {/* left section */}\n              <div className=\"hidden w-full bg-gradient-to-b from-brand3 to-brand1 px-8 pb-12 pt-8 sm:block\">\n                <div className=\"align-center flex h-full flex-col justify-center gap-4\">\n                  <div className=\"flex grow flex-col items-center justify-center px-6 py-8\">\n                    <img\n                      className=\"m-0 mx-auto\"\n                      src=\"/img_login.svg\"\n                      alt=\"Login\"\n                    />\n                  </div>\n                  <h1 className=\"text-5xl font-bold leading-10 tracking-tight text-slate-50\">\n                    Partner\n                    <br />\n                    sehat\n                    <br />\n                    bersama\n                  </h1>\n                </div>\n              </div>\n\n              {/* right section */}\n              <div className=\"flex w-full shrink-0 flex-col items-center justify-center space-y-4 p-4 py-8 sm:w-1/2 sm:p-16\">\n                <div className=\"w-full space-y-4 md:space-y-6\">\n                  <h1 className=\"leading text-3xl font-bold tracking-tight text-slate-800 dark:text-slate-50\">\n                    Daftar\n                  </h1>\n                  <form\n                    className=\"space-y-4 \"\n                    onSubmit={handleSubmit(onSubmit)}\n                  >\n                    <Input\n                      label=\"Nama Lengkap\"\n                      type=\"full_name\"\n                      id=\"full_name\"\n                      placeholder=\"Nama Langkap\"\n                      {...register(\"full_name\")}\n                    />\n                    <Input\n                      label=\"Nomor Telepon\"\n                      type=\"number\"\n                      id=\"phone_number\"\n                      placeholder=\"0812345xxxx\"\n                      {...register(\"phone_number\")}\n                    />\n                    <Input\n                      label=\"Email\"\n                      type=\"email\"\n                      id=\"email\"\n                      placeholder=\"nama@domain.com\"\n                      {...register(\"email\")}\n                    />\n                    <Input\n                      label=\"Password\"\n                      type=\"password\"\n                      id=\"password\"\n                      placeholder=\"Masukkan password\"\n                      {...register(\"password\")}\n                    />\n                    <Input\n                      label=\"Ulangi Password\"\n                      type=\"password\"\n                      id=\"confirm_password\"\n                      placeholder=\"Ulangi password\"\n                      {...register(\"confirm_password\", {\n                        validate: (val: string) => {\n                          if (watch(\"password\") !== val) {\n                            return \"Password Anda tidak cocok\";\n                          }\n                        },\n                      })}\n                    />\n                    <div className=\"pt-4\">\n                      <Button\n                        type=\"submit\"\n                        loading={isRegistering}\n                        color=\"primary\"\n                        className=\"mt-8 w-full\"\n                      >\n                        Daftar Sekarang\n                      </Button>\n                    </div>\n                    <p className=\"text-sm font-light text-gray-500 dark:text-gray-400\">\n                      Sudah punya akun?{\" \"}\n                      <a\n                        href=\"/login\"\n                        className=\"text-primary-600 dark:text-primary-500 font-medium hover:underline\"\n                      >\n                        Masuk\n                      </a>\n                    </p>\n                  </form>\n                </div>\n              </div>\n            </Card>\n          </div>\n        </Transition.Child>\n      </Transition>\n    </LayoutPlain>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}